---
layout: default
---
{% include navheader.html %}

<div class="main-container container">
  <div class="row">
    <!-- Main Content Area -->
    <section class="col-lg-8">
      <a id="main content">
        <!-- Mission Statement -->
        <div class="mission-statement mb-4">
          <h2>Our Mission</h2>
          <p class="lead">
            We are a research group at Imperial College London, focusing on sustainable water resources management. 
            We work across the entire toolchain from data collection and process understanding to simulation, prediction, 
            and decision-support. Our research addresses critical challenges including climate change impacts, land-use changes, 
            ecosystem services, and uncertainty analysis.
          </p>
          <p>
            We work predominantly in tropical regions such as the South-American Andes, the African rift, and South Asia, 
            as well as in the UK and Europe. We collaborate extensively with universities worldwide, policy institutes, 
            governments, NGOs, and local stakeholders.
          </p>
        </div>

        <!-- News Feed -->
        <div class="news-feed">
          <h3>Latest News</h3>
          <div class="list-group">
            {% for item in site.data.news limit:5 %}
            <div class="list-group-item">
              <div class="d-flex w-100 justify-content-between">
                <h5 class="mb-1">
                  {% if item.link %}
                    <a href="{{ item.link }}">{{ item.title }}</a>
                  {% else %}
                    {{ item.title }}
                  {% endif %}
                </h5>
                <small class="text-muted">{{ item.date | date: "%b %d, %Y" }}</small>
              </div>
              {% if item.description %}
              <p class="mb-1">{{ item.description }}</p>
              {% endif %}
            </div>
            {% endfor %}
          </div>
        </div>

        <!-- Additional Content -->
        <div class="mt-4">
          {{ content }}
        </div>
      </a>
    </section>

    <!-- Right Sidebar -->
    <aside class="col-lg-4" role="complementary">
      <!-- World Map -->
      <div class="map-section mb-4">
        <h4>Where We Work</h4>
        <div id="globe-container" style="width: 100%; height: 300px; position: relative; margin-bottom: 1rem;">
          <svg id="globe" width="100%" height="300"></svg>
        </div>
        <div class="country-list">
          {% for country in site.data.countries.countries %}
            <span class="country-badge" data-country="{{ country.code }}">{{ country.name }}</span>
          {% endfor %}
        </div>
      </div>

      <!-- Research Themes -->
      <div class="tag-cloud-section">
        <h4>Research Themes</h4>
        <div class="research-tags">
          {% for tag in site.data.tags.tags %}
            <span class="research-badge">{{ tag.name }}</span>
          {% endfor %}
        </div>
      </div>

      <!-- Field Photos -->
      <div class="field-photos mt-4">
        <img src="{{ '/assets/img/2023_bolivia.jpg' | relative_url }}" alt="Deplete project visit Bolivia" class="img-fluid rounded mb-2">
        <img src="{{ '/assets/img/2019_peru.jpg' | relative_url }}" alt="RAHU project field work, Peru" class="img-fluid rounded">
      </div>
    </aside>
  </div>
</div>

<style>
.mission-statement {
  background-color: #f8f9fa;
  padding: 2rem;
  border-radius: 5px;
  border-left: 4px solid #003e79;
}

.news-feed .list-group-item {
  border-left: 3px solid #003e79;
  margin-bottom: 0.5rem;
}

.news-feed .list-group-item:hover {
  background-color: #f8f9fa;
}

/* Country badges */
.country-list {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
}

.country-badge {
  display: inline-block;
  padding: 0.35rem 0.85rem;
  background-color: #003e79;
  color: white;
  border-radius: 12px;
  font-size: 0.85rem;
  font-weight: 500;
  white-space: nowrap;
  transition: background-color 0.2s;
}

.country-badge:hover {
  background-color: #00294d;
}

/* Research theme badges */
.research-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
}

.research-badge {
  display: inline-block;
  padding: 0.35rem 0.85rem;
  background-color: #0366d6;
  color: white;
  border-radius: 12px;
  font-size: 0.85rem;
  font-weight: 500;
  white-space: nowrap;
  transition: background-color 0.2s;
}

.research-badge:hover {
  background-color: #0256c7;
}

/* Specific research theme colors */
.research-badge:nth-child(1) { background-color: #1e88e5; } /* Water Security */
.research-badge:nth-child(2) { background-color: #43a047; } /* Climate Change */
.research-badge:nth-child(3) { background-color: #0366d6; } /* Hydrology */
.research-badge:nth-child(4) { background-color: #00acc1; } /* Glacier */
.research-badge:nth-child(5) { background-color: #8e24aa; } /* Mountain Ecosystems */
.research-badge:nth-child(6) { background-color: #fb8c00; } /* Citizen Science */
.research-badge:nth-child(7) { background-color: #3f51b5; } /* Data Science */
.research-badge:nth-child(8) { background-color: #00897b; } /* Uncertainty */
.research-badge:nth-child(9) { background-color: #5e35b1; } /* Ecosystem Services */
.research-badge:nth-child(10) { background-color: #1976d2; } /* Modelling */
.research-badge:nth-child(11) { background-color: #00796b; } /* Adaptation */
.research-badge:nth-child(12) { background-color: #6a1b9a; } /* Monitoring */
.research-badge:nth-child(13) { background-color: #e64a19; } /* Sensors */
.research-badge:nth-child(14) { background-color: #0288d1; } /* Flood Risk */
.research-badge:nth-child(15) { background-color: #f57c00; } /* Drought */
.research-badge:nth-child(16) { background-color: #7b1fa2; } /* Landslides */
.research-badge:nth-child(17) { background-color: #0097a7; } /* Water Quality */
.research-badge:nth-child(18) { background-color: #388e3c; } /* Tropical Andes */
.research-badge:nth-child(19) { background-color: #512da8; } /* Policy Support */
.research-badge:nth-child(20) { background-color: #1565c0; } /* Decision Making */

/* Globe styling */
#globe-container {
  background: linear-gradient(to bottom, #e3f2fd 0%, #bbdefb 100%);
  border-radius: 5px;
  cursor: grab;
}

#globe-container:active {
  cursor: grabbing;
}

.globe-country {
  fill: #ccc;
  stroke: #fff;
  stroke-width: 0.5;
  transition: fill 0.3s;
}

.globe-country:hover {
  fill: #999;
}

.globe-country.highlight {
  fill: #003e79;
  cursor: pointer;
}

.globe-country.highlight:hover {
  fill: #00529e;
}

@media (max-width: 991px) {
  .mission-statement {
    padding: 1rem;
  }
  
  #globe-container {
    height: 250px;
  }
  
  #globe {
    height: 250px;
  }
}
</style>

<!-- D3.js and TopoJSON libraries -->
<script src="https://d3js.org/d3.v7.min.js"></script>
<script src="https://unpkg.com/topojson@3"></script>

<script>
// Country code mapping for our research locations
const researchCountries = new Set([
  'PER', 'ECU', 'COL', 'VEN', 'CHL', 'BOL', 'ETH', 'IND', 'NPL', 'GBR'
]);

// Country links mapping
const countryLinks = {
  'PER': '/ichydro.github.io/projects.html#peru',
  'ECU': '/ichydro.github.io/projects.html#ecuador',
  'COL': '/ichydro.github.io/projects.html#colombia',
  'VEN': '/ichydro.github.io/projects.html#venezuela',
  'CHL': '/ichydro.github.io/projects.html#chile',
  'BOL': '/ichydro.github.io/projects.html#bolivia',
  'ETH': '/ichydro.github.io/projects.html#ethiopia',
  'IND': '/ichydro.github.io/projects.html#india',
  'NPL': '/ichydro.github.io/projects.html#nepal',
  'GBR': '/ichydro.github.io/projects.html#uk'
};

// Initialize globe
function initGlobe() {
  const container = d3.select('#globe-container');
  const width = container.node().getBoundingClientRect().width;
  const height = 300;
  
  const svg = d3.select('#globe')
    .attr('width', width)
    .attr('height', height);
  
  // Clear any existing content
  svg.selectAll('*').remove();
  
  const projection = d3.geoOrthographic()
    .scale(Math.min(width, height) / 2.5)
    .translate([width / 2, height / 2])
    .clipAngle(90);
  
  const path = d3.geoPath().projection(projection);
  
  // Add ocean background
  svg.append('circle')
    .attr('cx', width / 2)
    .attr('cy', height / 2)
    .attr('r', projection.scale())
    .attr('fill', '#4fc3f7')
    .attr('opacity', 0.3);
  
  // Load world data
  d3.json('https://cdn.jsdelivr.net/npm/world-atlas@2/countries-110m.json').then(world => {
    const countries = topojson.feature(world, world.objects.countries);
    
    // Draw countries
    svg.append('g')
      .selectAll('path')
      .data(countries.features)
      .join('path')
      .attr('class', d => {
        const code = d.id;
        return researchCountries.has(code) ? 'globe-country highlight' : 'globe-country';
      })
      .attr('d', path)
      .on('click', function(event, d) {
        const code = d.id;
        if (researchCountries.has(code) && countryLinks[code]) {
          window.location.href = countryLinks[code];
        }
      })
      .append('title')
      .text(d => {
        const code = d.id;
        if (researchCountries.has(code)) {
          return 'Click to see projects in this region';
        }
        return '';
      });
    
    // Auto-rotation
    let rotation = 0;
    let autoRotate = true;
    
    function rotate() {
      if (autoRotate) {
        rotation += 0.5;
        projection.rotate([rotation, -10]);
        svg.selectAll('path').attr('d', path);
      }
    }
    
    const rotateInterval = setInterval(rotate, 50);
    
    // Drag functionality
    const drag = d3.drag()
      .on('start', function() {
        autoRotate = false;
      })
      .on('drag', function(event) {
        const rotate = projection.rotate();
        projection.rotate([
          rotate[0] + event.dx * 0.5,
          rotate[1] - event.dy * 0.5
        ]);
        svg.selectAll('path').attr('d', path);
      })
      .on('end', function() {
        setTimeout(() => {
          autoRotate = true;
        }, 2000);
      });
    
    svg.call(drag);
  });
}

// Initialize on page load
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', initGlobe);
} else {
  initGlobe();
}

// Re-initialize on window resize
let resizeTimeout;
window.addEventListener('resize', function() {
  clearTimeout(resizeTimeout);
  resizeTimeout = setTimeout(initGlobe, 250);
});

// Badge click functionality
document.addEventListener('DOMContentLoaded', function() {
  const countryCodeToLink = {
    'PE': '/ichydro.github.io/projects.html#peru',
    'EC': '/ichydro.github.io/projects.html#ecuador',
    'CO': '/ichydro.github.io/projects.html#colombia',
    'VE': '/ichydro.github.io/projects.html#venezuela',
    'CL': '/ichydro.github.io/projects.html#chile',
    'BO': '/ichydro.github.io/projects.html#bolivia',
    'ET': '/ichydro.github.io/projects.html#ethiopia',
    'IN': '/ichydro.github.io/projects.html#india',
    'NP': '/ichydro.github.io/projects.html#nepal',
    'GB': '/ichydro.github.io/projects.html#uk'
  };
  
  document.querySelectorAll('.country-badge').forEach(badge => {
    const code = badge.getAttribute('data-country');
    if (countryCodeToLink[code]) {
      badge.style.cursor = 'pointer';
      badge.addEventListener('click', function() {
        window.location.href = countryCodeToLink[code];
      });
    }
  });
});
</script>

