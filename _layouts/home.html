---
layout: default
---
{% include navheader.html %}

<div class="main-container container">
  <div class="row">
    <!-- Main Content Area -->
    <section class="col-lg-8">
      <a id="main content">
        <!-- Mission Statement -->
        <div class="mission-statement mb-4">
          <h2>Our Mission</h2>
          <p class="lead">
            We are a research group at Imperial College London, focusing on sustainable water resources management. 
            We work across the entire toolchain from data collection and process understanding to simulation, prediction, 
            and decision-support. Our research addresses critical challenges including climate change impacts, land-use changes, 
            ecosystem services, and uncertainty analysis.
          </p>
          <p>
            We work predominantly in tropical regions such as the South-American Andes, the African rift, and South Asia, 
            as well as in the UK and Europe. We collaborate extensively with universities worldwide, policy institutes, 
            governments, NGOs, and local stakeholders.
          </p>
        </div>

        <!-- News Feed -->
        <div class="news-feed">
          <h3>Latest News</h3>
          <div class="list-group">
            {% for item in site.data.news limit:5 %}
            <div class="list-group-item">
              <div class="d-flex w-100 justify-content-between">
                <h5 class="mb-1">
                  {% if item.link %}
                    <a href="{{ item.link }}">{{ item.title }}</a>
                  {% else %}
                    {{ item.title }}
                  {% endif %}
                </h5>
                <small class="text-muted">{{ item.date | date: "%b %d, %Y" }}</small>
              </div>
              {% if item.description %}
              <p class="mb-1">{{ item.description }}</p>
              {% endif %}
            </div>
            {% endfor %}
          </div>
        </div>

        <!-- Additional Content -->
        <div class="mt-4">
          {{ content }}
        </div>
      </a>
    </section>

    <!-- Right Sidebar -->
    <aside class="col-lg-4" role="complementary">
      <!-- World Map -->
      <div class="map-section mb-4">
        <h4>Where We Work</h4>
        <div id="globe-container" style="width: 100%; height: 300px; position: relative;">
          <svg id="globe" width="100%" height="300"></svg>
        </div>
      </div>

      <!-- Image Gallery -->
      <div class="image-gallery mb-4">
        <h4>Field Work Gallery</h4>
        <div class="gallery-container">
          <img src="{{ '/assets/img/slideshow/2023_bolivia.jpg' | relative_url }}" alt="Deplete project visit Bolivia" class="gallery-image active">
          <img src="{{ '/assets/img/slideshow/2019_peru.jpg' | relative_url }}" alt="RAHU project field work, Peru" class="gallery-image">
          <img src="{{ '/assets/img/slideshow/hydroflux.jpg' | relative_url }}" alt="Hydroflux project" class="gallery-image">
          <img src="{{ '/assets/img/slideshow/tienshan.jpg' | relative_url }}" alt="Tien Shan field work" class="gallery-image">
        </div>
      </div>

      <!-- Research Themes -->
      <div class="tag-cloud-section">
        <h4>Research Themes</h4>
        <div class="research-tags">
          {% for tag in site.data.tags.tags %}
            {% assign size_scale = tag.weight | times: 0.05 | plus: 0.75 %}
            <span class="research-badge badge" data-tag="{{ tag.name }}" style="
              font-size: {{ size_scale }}rem;
              padding: {{ size_scale | times: 0.3 }}rem {{ size_scale | times: 0.8 }}rem;
            ">{{ tag.name }}</span>
          {% endfor %}
        </div>
      </div>
    </aside>
  </div>
</div>

<style>
.mission-statement {
  background-color: #f8f9fa;
  padding: 2rem;
  border-radius: 5px;
  border-left: 4px solid #003e79;
}

.news-feed .list-group-item {
  border-left: 3px solid #003e79;
  margin-bottom: 0.5rem;
}

.news-feed .list-group-item:hover {
  background-color: #f8f9fa;
}

/* Research theme badges */
.research-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  align-items: center;
}

.research-badge {
  display: inline-flex;
  align-items: center;
  border-radius: 12px;
  font-weight: 500;
  white-space: nowrap;
  transition: all 0.2s ease;
  text-transform: capitalize;
}

.research-badge:hover {
  transform: scale(1.05);
  box-shadow: 0 2px 4px rgba(0,0,0,0.15);
}

/* Color coding based on tag categories - matching projects.md badges */
.research-badge[data-tag*="Water"],
.research-badge[data-tag*="Hydrology"],
.research-badge[data-tag*="Flood"] {
  background: #e3f2fd;
  color: #1565c0;
}

.research-badge[data-tag*="Climate"],
.research-badge[data-tag*="Ecosystem"],
.research-badge[data-tag*="Tropical"],
.research-badge[data-tag*="Mountain"] {
  background: #e8f5e9;
  color: #2e7d32;
}

.research-badge[data-tag*="Drought"],
.research-badge[data-tag*="Landslide"],
.research-badge[data-tag*="Glacier"] {
  background: #fff3e0;
  color: #e65100;
}

.research-badge[data-tag*="Modelling"],
.research-badge[data-tag*="Data Science"],
.research-badge[data-tag*="Sensors"],
.research-badge[data-tag*="Monitoring"] {
  background: #f3e5f5;
  color: #6a1b9a;
}

.research-badge[data-tag*="Citizen"],
.research-badge[data-tag*="Uncertainty"],
.research-badge[data-tag*="Adaptation"] {
  background: #e8eaf6;
  color: #283593;
}

.research-badge[data-tag*="Policy"],
.research-badge[data-tag*="Decision"] {
  background: #e0f2f1;
  color: #00695c;
}

/* Image Gallery */
.gallery-container {
  position: relative;
  width: 100%;
  height: 250px;
  border-radius: 5px;
  overflow: hidden;
  background-color: #000;
}

.gallery-image {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  opacity: 0;
  transition: opacity 1.5s ease-in-out;
}

.gallery-image.active {
  opacity: 1;
}

/* Globe styling */
#globe-container {
  background: #ffffff;
  border-radius: 5px;
  cursor: grab;
  border: 1px solid #e0e0e0;
}

#globe-container:active {
  cursor: grabbing;
}

.globe-country {
  stroke: #fff;
  stroke-width: 0.5;
  transition: fill 0.3s;
}

.globe-country.highlight {
  cursor: pointer;
}

@media (max-width: 991px) {
  .mission-statement {
    padding: 1rem;
  }
  
  #globe-container {
    height: 250px;
  }
  
  #globe {
    height: 250px;
  }
}
</style>

<!-- D3.js and TopoJSON libraries -->
<script src="https://d3js.org/d3.v7.min.js"></script>
<script src="https://unpkg.com/topojson@3"></script>

<script>
// Country code mapping for our research locations
// Using numeric country IDs from world-atlas
const researchCountries = new Set([
  604,  // Peru
  218,  // Ecuador
  170,  // Colombia
  862,  // Venezuela
  152,  // Chile
  68,   // Bolivia
  231,  // Ethiopia
  356,  // India
  524,  // Nepal
  826,  // United Kingdom
  840   // United States
]);

// Country links mapping (using numeric IDs)
const countryLinks = {
  604: '/ichydro.github.io/projects.html#peru',      // Peru
  218: '/ichydro.github.io/projects.html#ecuador',   // Ecuador
  170: '/ichydro.github.io/projects.html#colombia',  // Colombia
  862: '/ichydro.github.io/projects.html#venezuela', // Venezuela
  152: '/ichydro.github.io/projects.html#chile',     // Chile
  68: '/ichydro.github.io/projects.html#bolivia',    // Bolivia
  231: '/ichydro.github.io/projects.html#ethiopia',  // Ethiopia
  356: '/ichydro.github.io/projects.html#india',     // India
  524: '/ichydro.github.io/projects.html#nepal',     // Nepal
  826: '/ichydro.github.io/projects.html#uk',        // United Kingdom
  840: '/ichydro.github.io/projects.html#usa'        // United States
};

// Initialize globe
function initGlobe() {
  const container = d3.select('#globe-container');
  const width = container.node().getBoundingClientRect().width;
  const height = 300;
  
  const svg = d3.select('#globe')
    .attr('width', width)
    .attr('height', height);
  
  // Clear any existing content
  svg.selectAll('*').remove();
  
  const projection = d3.geoOrthographic()
    .scale(Math.min(width, height) / 2.5)
    .translate([width / 2, height / 2])
    .clipAngle(90);
  
  const path = d3.geoPath().projection(projection);
  
  // Add ocean background (brighter blue water)
  svg.append('circle')
    .attr('cx', width / 2)
    .attr('cy', height / 2)
    .attr('r', projection.scale())
    .attr('fill', '#4a90e2')
    .attr('stroke', '#ffffff')
    .attr('stroke-width', 2);
  
  // Load world data
  d3.json('https://cdn.jsdelivr.net/npm/world-atlas@2/countries-110m.json').then(world => {
    const countries = topojson.feature(world, world.objects.countries);
    
    // Draw countries
    const countriesGroup = svg.append('g');
    
    countriesGroup.selectAll('path')
      .data(countries.features)
      .join('path')
      .attr('class', d => {
        const code = parseInt(d.id);
        return researchCountries.has(code) ? 'globe-country highlight' : 'globe-country';
      })
      .attr('d', path)
      .style('fill', d => {
        const code = parseInt(d.id);
        return researchCountries.has(code) ? '#003e79' : '#e0e0e0';
      })
      .on('click', function(event, d) {
        const code = parseInt(d.id);
        if (researchCountries.has(code) && countryLinks[code]) {
          window.location.href = countryLinks[code];
        }
      })
      .on('mouseover', function(event, d) {
        const code = parseInt(d.id);
        if (researchCountries.has(code)) {
          d3.select(this).style('fill', '#00529e');
        } else {
          d3.select(this).style('fill', '#d0d0d0');
        }
      })
      .on('mouseout', function(event, d) {
        const code = parseInt(d.id);
        if (researchCountries.has(code)) {
          d3.select(this).style('fill', '#003e79');
        } else {
          d3.select(this).style('fill', '#e0e0e0');
        }
      })
      .append('title')
      .text(d => {
        const code = parseInt(d.id);
        if (researchCountries.has(code)) {
          return 'Click to see projects in this region';
        }
        return '';
      });
    
    // Auto-rotation
    let rotation = 0;
    let autoRotate = true;
    
    function rotate() {
      if (autoRotate) {
        rotation += 0.5;
        projection.rotate([rotation, -10]);
        countriesGroup.selectAll('path')
          .attr('d', path)
          .style('fill', d => {
            const code = parseInt(d.id);
            return researchCountries.has(code) ? '#003e79' : '#e0e0e0';
          });
      }
    }
    
    const rotateInterval = setInterval(rotate, 50);
    
    // Drag functionality
    const drag = d3.drag()
      .on('start', function() {
        autoRotate = false;
      })
      .on('drag', function(event) {
        const rotate = projection.rotate();
        projection.rotate([
          rotate[0] + event.dx * 0.5,
          rotate[1] - event.dy * 0.5
        ]);
        countriesGroup.selectAll('path')
          .attr('d', path)
          .style('fill', d => {
            const code = parseInt(d.id);
            return researchCountries.has(code) ? '#003e79' : '#e0e0e0';
          });
      })
      .on('end', function() {
        setTimeout(() => {
          autoRotate = true;
        }, 2000);
      });
    
    svg.call(drag);
  });
}

// Initialize on page load
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', initGlobe);
} else {
  initGlobe();
}

// Re-initialize on window resize
let resizeTimeout;
window.addEventListener('resize', function() {
  clearTimeout(resizeTimeout);
  resizeTimeout = setTimeout(initGlobe, 250);
});

// Image Gallery Auto-fade
function initGallery() {
  const images = document.querySelectorAll('.gallery-image');
  if (images.length === 0) return;
  
  let currentIndex = 0;
  
  setInterval(() => {
    // Remove active class from current image
    images[currentIndex].classList.remove('active');
    
    // Move to next image
    currentIndex = (currentIndex + 1) % images.length;
    
    // Add active class to next image
    images[currentIndex].classList.add('active');
  }, 4000); // Change image every 4 seconds
}

// Initialize gallery on page load
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', initGallery);
} else {
  initGallery();
}

</script>

